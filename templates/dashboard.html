<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cubie NAS Dashboard</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
</head>
<body>
  <header>
    <h1>Cubie NAS</h1>
    <div class="header-actions">
      <button id="theme-toggle">Dark/Light</button>
      <button id="logout-btn">Logout</button>
    </div>
  </header>

  <main class="grid">
    <section>
      <h2>System Monitoring (Realtime)</h2>
      <div class="stats" id="stats">
        <div>CPU: <span id="cpu">-</span></div>
        <div>RAM: <span id="ram">-</span></div>
        <div>Temp: <span id="temp">-</span></div>
        <div>Net RX: <span id="rx">-</span></div>
        <div>Net TX: <span id="tx">-</span></div>
        <div>Disk Read: <span id="disk-r">-</span></div>
        <div>Disk Write: <span id="disk-w">-</span></div>
        <div>Uptime: <span id="uptime">-</span></div>
      </div>
    </section>

    <section>
      <h2>Storage</h2>
      <button onclick="loadDrives()">Refresh Drives</button>
      <table id="drives-table">
        <thead><tr><th>Device</th><th>FS</th><th>Size</th><th>Mount</th><th>Used</th><th>Free</th><th>SMART</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <section>
      <h2>File Manager</h2>
      <div class="row">
        <input id="path" value="" placeholder="relative path" />
        <select id="sortBy"><option value="name">Name</option><option value="size">Size</option><option value="date">Date</option></select>
        <select id="sortOrder"><option value="asc">Asc</option><option value="desc">Desc</option></select>
        <button onclick="loadFiles()">Browse</button>
      </div>
      <div class="row">
        <input id="mkdir-name" placeholder="new folder" />
        <button onclick="createFolder()">Create Folder</button>
      </div>
      <div id="drop-zone">Drag and drop files here to upload</div>
      <table id="files-table">
        <thead><tr><th>Name</th><th>Size</th><th>Date</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <section>
      <h2>Services</h2>
      <button onclick="loadServices()">Refresh Services</button>
      <table id="services-table">
        <thead><tr><th>Service</th><th>Enabled</th><th>Active</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <section>
      <h2>User Management (Admin)</h2>
      <div class="row"><input id="new-user" placeholder="username" /><input id="new-pass" type="password" placeholder="password" /><select id="new-role"><option value="user">user</option><option value="admin">admin</option></select><button onclick="createAppUser()">Create App User</button></div>
      <div class="row"><input id="sys-user" placeholder="linux username" /><input id="sys-pass" type="password" placeholder="linux password" /><button onclick="createSystemUser()">Create System User</button></div>
      <button onclick="loadSessions()">View Active Sessions</button>
      <pre id="sessions-box"></pre>
    </section>

    <section>
      <h2>Security Helpers</h2>
      <button onclick="generateTLS()">Generate Self-Signed TLS</button>
      <button onclick="showFirewallCmds()">Show Firewall Commands</button>
      <button onclick="applyFirewall()">Apply Firewall</button>
      <pre id="security-box"></pre>
    </section>

    <section>
      <h2>Bonus</h2>
      <div class="row">
        <button onclick="listDocker()">List Docker Containers</button>
        <button onclick="listPlugins()">List Plugins</button>
      </div>
      <div class="row">
        <input id="backup-src" placeholder="backup source path" />
        <input id="backup-dst" placeholder="backup destination path" />
        <button onclick="runBackup()">Run Backup</button>
      </div>
      <pre id="bonus-box"></pre>
    </section>
  </main>

  <script src="/static/js/app.js"></script>
</body>
</html>
